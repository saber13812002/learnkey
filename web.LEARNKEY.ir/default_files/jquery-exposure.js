(function(n){n.exposure={v:"1.0.1",defaultTargetId:"exposure",wrapperClass:"exposureWrapper",targetClass:"exposureTarget",currentImageClass:"exposureCurrentImage",lastImageClass:"exposureLastImage",captionClass:"caption",imageDataClass:"extra",dataContainerClass:"exposureData",controlsClass:"exposureControls",slideshowControlsClass:"exposureSlideshowControls",firstPageClass:"exposureFirstPage",prevPageClass:"exposurePrevPage",nextPageClass:"exposureNextPage",lastPageClass:"exposureLastPage",pagingClass:"exposurePaging",playSlideshowClass:"exposurePlaySlideshow",pauseSlideshowClass:"exposurePauseSlideshow",maskClass:"exposureMask",thumbsClass:"exposureThumbs",imageClass:"exposureImage",imageHoverClass:"exposureHover",selectedImageClass:"selected",activeThumbClass:"active",currentThumbClass:"current",firstThumbClass:"first",lastThumbClass:"last",loadedClass:"loaded",activeLinkClass:"active",disabledLinkClass:"disabled",isDefined:function(n){return typeof n!="undefined"},isObject:function(n){return typeof n=="object"},startsWith:function(n,t){return n&&t?n.match("^"+t)===t:!1},widthDiff:function(n){return n?n.outerWidth(!0)-n.width():0},heightDiff:function(n){return n?n.outerHeight(!0)-n.height():0},createLink:function(t,i,r){var u=n('<a href="javascript:void(0);"><\/a>').text(t).click(i);return r&&u.addClass(r),u},texts:{first:"First",previous:"Prev",next:"Next",last:"Last",play:"Play slideshow",pause:"Pause slideshow"}};var t={target:"#"+n.exposure.defaultTargetId,showThumbs:!0,showControls:!0,imageControls:!1,controls:{prevNext:!0,firstLast:!0,pageNumbers:!0},carouselControls:!1,enableSlideshow:!0,slideshowControlsTarget:null,autostartSlideshow:!1,slideshowDelay:3e3,onSlideshowPlayed:function(){},onSlideshowPaused:function(){},showCaptions:!0,showExtraData:!0,dataTarget:null,controlsTarget:null,onThumb:function(){},onImage:function(t){t.siblings("."+n.exposure.lastImageClass).remove()},onImageHoverOver:function(){},onImageHoverOut:function(){},onCarousel:function(){},onNext:function(){},onPrev:function(){},onPageChanged:function(){},onPagingLink:function(n){return n},separatePageBrowsing:!1,loop:!0,onEndOfLoop:function(){},pageSize:5,viewFirstImage:!0,visiblePages:5,preloadBuffer:3,keyboardNavigation:!0,clickingNavigation:!0,fixedContainerSize:!1,maxWidth:null,maxHeight:null,stretchToMaxSize:!1,fullScreen:!1,onEnterFullScreen:function(n){n.show()},onExitFullScreen:function(n,t){n.hide();t.hide()},showThumbToolTip:!0,onEmpty:function(n){n.hide();n.targetElement.remove();n.showControls&&n.controlsElement.remove();n.slideshowControlsTarget&&n.slideshowControlsElement.remove()},onInit:function(){},allowDuplicates:!0,jsonSource:null},i=function(n,t,i,r){this.src=n;this.thumb=t;this.caption=i;this.data=r;this.loaded=!1};n.fn.exposure=function(r){var u=this,f=n.exposure,o=f.texts,c,l,s,h,e;return n.extend(this,{images:[],sources:{},newImage:function(n,t,r,e){var s=f.isDefined(u.sources[n]),h,o;return s&&!u.allowDuplicates?-1:(h=new i(n,t,r,e),o=u.images.push(h)-1,s||(u.sources[n]=o),o)},initialized:!1,current:-1,deselectCurrentImage:function(){u.current=-1;u.find("li."+f.activeThumbClass).removeClass(f.activeThumbClass)},loadQueue:[],addToLoadQueue:function(n){u.loaded(n)||u.queued(n)||u.loadQueue.push(n)},queued:function(t){return n.inArray(t,u.loadQueue)>-1},loaded:function(n){var t=u.getImage(n);return t!==null?t.loaded:!1},nextInLoadQueue:function(){var i,t;return u.loadQueue.length>0?(t=u.loadQueue.shift(),u.loaded(t))?(i=n.inArray(t,this.loadQueue),u.loadQueue.splice(i,1),u.nextInLoadQueue()):t:null},preloadNextInQueue:function(){if(u.loadQueue.length>0){var n=u.nextInLoadQueue();n!==null&&u.loadImage(n,u.preloadNextInQueue)}},loadImage:function(t,i){var r=u.getImage(t),e=n("<img />").addClass(f.imageClass),o;return r!==null&&(r.loaded=!0,u.queued(t)&&(o=n.inArray(t,u.loadQueue),u.loadQueue.splice(o,1)),typeof i=="function"&&e.load(i),e.attr("src",r.src)),e},pageNumberForImage:function(n){return Math.ceil((n+1)/u.pageSize)},numberOfPages:function(){return this.pageNumberForImage(u.images.length-1)},atFirstPage:function(){return u.currentPage===1},atLastPage:function(){return u.currentPage===u.numberOfPages()},validPage:function(n){return n>0&&n<=u.numberOfPages()},createPaging:function(){var t,i;u.showControls&&u.controls.pageNumbers&&(i=u.imageControls?u.numberOfImages():u.numberOfPages(),u.controlsElement.find("."+f.pagingClass).each(function(){for(t=1;t<=i;t++)n(this).append(u.newPagingLink(t))}))},updatePaging:function(t){var h,r,e;if(u.showControls&&u.controls.pageNumbers&&(h=u.imageControls?u.current+1:u.currentPage,r=u.controlsElement.find("."+f.pagingClass),r.find(" span."+f.activeLinkClass).each(function(){n(this).replaceWith(u.newPagingLink(h))}),r.find('a[rel="'+t+'"]').each(function(){n(this).replaceWith(n("<span>"+t+"<\/span>").addClass(f.activeLinkClass))}),e=u.imageControls?u.numberOfImages():u.numberOfPages(),u.visiblePages>0&&e>u.visiblePages)){var i=t,o=u.visiblePages,s=Math.floor(u.visiblePages/2);t<=s?i=1:t>e-s?(o=e,i=o-u.visiblePages+1):(i-=s,o=i+u.visiblePages-1);r.each(function(){n(this).children().each(function(t){var r=t+1;r>=i&&r<=o?n(this).show():n(this).hide()})})}},newPagingLink:function(t){var i=function(){var t=Number(n(this).attr("rel"));u.imageControls?u.viewImage(t-1):u.goToPage(t)};return f.createLink(t,i).attr("rel",t)},getNextImage:function(){if(u.current===u.images.length-1){if(u.loop)return 0;u.onEndOfLoop()}else return u.current+1;return null},getPrevImage:function(){if(u.current===0){if(u.loop)return u.images.length-1}else return u.current-1;return null},currentPage:1,goToPage:function(t,i){if(this.validPage(t)){u.find("li").removeClass(f.currentThumbClass).hide();u.loadPage(t,i);u.imageControls||u.updatePaging(t);u.currentPage=t;var r=f.disabledLinkClass;if(u.showControls&&(u.atFirstPage()?(u.controls.firstLast&&u.find("."+f.firstPageClass).addClass(r),!u.loop&&u.controls.prevNext&&u.find("."+f.prevPageClass).hide()):(u.controls.firstLast&&u.find("."+f.firstPageClass).removeClass(r),!u.loop&&u.controls.prevNext&&u.find("."+f.prevPageClass).show()),u.atLastPage()?(u.controls.firstLast&&u.find("."+f.lastPageClass).addClass(r),!u.loop&&u.controls.prevNext&&u.find("."+f.nextPageClass).hide()):(u.controls.firstLast&&u.find("."+f.lastPageClass).removeClass(r),!u.loop&&u.controls.prevNext&&u.find("."+f.nextPageClass).show())),!u.carouselControls){u.find("li."+f.currentThumbClass).show().each(function(){var t=n(this).find("img").height();t>0&&n(this).height(t)});u.onPageChanged(u)}}},loadPage:function(n,t){if(u.validPage(n)){var i=n*u.pageSize,r=i-u.pageSize;i>u.images.length&&(i=u.images.length);u.pageTransition=!0;u.viewThumbs(r,i-1);u.separatePageBrowsing||(t?u.viewImage(t):(n>1||n===1&&u.viewFirstImage||u.initialized)&&u.viewImage(r));u.pageTransition=!1}},viewThumbs:function(n,t){var i,e,r,f;if(u.showThumbs){for(i=n;i<=t;i++)u.viewThumb(i,i===n,i===t,!0);if(!u.carouselControls&&u.currentPage<u.numberOfPages())for(e=t+1,r=t+u.pageSize,r>=u.images.length&&(r=u.images.length-1),i=e;i<=r;i++)f=u.viewThumb(i,i===e,i===r,!1),f&&f.length&&f.hide()}},viewThumb:function(n,t,i,r){n<0?n=u.images.length+n:n>=u.images.length&&(n=n-u.images.length);var o=u.images[n],e=u.getThumb(n).parent();return e.length||(e=u.createThumbForImage(o,n),e.attr("rel",u.pageNumberForImage(n))),e.length&&(e.parent().append(e),t?e.addClass(f.firstThumbClass):e.removeClass(f.firstThumbClass),i?e.addClass(f.lastThumbClass):e.removeClass(f.lastThumbClass),r&&(u.carouselControls?e.show():e.addClass(f.currentThumbClass))),e},getThumb:function(n){return u.find('img[rel="'+n+'"]')},createThumbForImage:function(t,i){var r,f,e,o;if(u.showThumbs&&(r=u.getThumb(i),r===null||!r.length)){f=n("<li><\/li>");u.append(f);r=n("<img />");t.thumb?r.attr("src",t.thumb):(r.attr("src",t.src),e=Math.ceil(r.width()/r.height()*f.height()),o=Math.ceil(r.height()/r.width()*f.width()),e<o?r.css({height:"auto",maxWidth:f.width()}):r.css({width:"auto",maxHeight:f.height()}));f.append(r.css("display","block"));r.attr("rel",i);t.caption&&u.showThumbToolTip&&r.attr("title",t.caption);r.data("data",t.data);r.click(function(){u.viewImage(Number(n(this).attr("rel")))});r.load(function(){var t=n(this).height();t>0&&n(this).parent().height(t)});u.onThumb(r);return f}return null},firstPage:function(){u.atFirstPage()||u.goToPage(1)},lastPage:function(){u.atLastPage()||u.goToPage(u.numberOfPages())},prevPage:function(){u.atFirstPage()?u.loop&&u.goToPage(u.numberOfPages()):u.goToPage(u.currentPage-1)},nextPage:function(){u.atLastPage()?u.loop&&u.goToPage(1):u.goToPage(u.currentPage+1)},firstImageOnPage:function(n){return n||(n=u.current),u.pageSize===1||n%u.pageSize==0},lastImageOnPage:function(n){var i,r,t,f,e;return(n||(n=u.current),i=u.images.length,u.pageSize===1||i===1)?!0:n>0?(r=u.pageSize,t=u.pageNumberForImage(n),t===u.numberOfPages()&&(f=i%u.pageSize,f>0&&(r=f)),e=n,t>1&&(e-=(t-1)*u.pageSize),(e+1)%r==0):!1},currentPageNumber:function(){return u.currentPage},numberOfImages:function(){return u.images.length},atFirstImage:function(){return u.current===0},atLastImage:function(){return u.current===u.numberOfImages()-1},getImage:function(n){return n!==null&&n>-1&&n<u.images.length?u.images[n]:null},indexOfImage:function(n){return n&&f.isDefined(u.sources[n])?u.sources[n]:-1},currentImage:function(){return u.current},addImage:function(t,i,r,e){var l=u.numberOfPages(),c=u.newImage(t,i,r,e),o,s,h;c>-1&&(o=u.pageNumberForImage(c),s=n("."+f.thumbsClass+' li[rel="'+o+'"]'),s.length&&s.removeClass(f.lastThumbClass),h=o>l,h&&(n("."+f.pagingClass).empty(),u.createPaging()),(h||o===u.currentPage)&&u.goToPage(u.currentPage))},removeImage:function(t){var e,i,o,s,r;u.images.length===1?u.removeAllImages():(u.enableSlideshow&&u.pauseSlideshow(),e=u.numberOfPages(),u.images.splice(t,1),i=n.inArray(t,u.loadQueue),i>-1&&u.loadQueue.splice(i,1),o=u.getThumb(t).parent(),o.remove(),n("."+f.thumbsClass+" > li").each(function(i){if(i>=t){var r=u.pageNumberForImage(i);n(this).attr("rel",r);n(this).find("img").attr("rel",i);u.firstImageOnPage(i)?n(this).addClass(f.firstThumbClass):n(this).removeClass(f.firstThumbClass);u.lastImageOnPage(i)?n(this).addClass(f.lastThumbClass):n(this).removeClass(f.lastThumbClass);u.currentPage===r?n(this).show():n(this).hide()}}),s=n.exposure.numberOfPages<e,s&&(n("."+f.pagingClass).empty(),u.createPaging()),u.current===t&&(u.current=-1,r=t,t===u.numberOfImages()&&(r=0),u.viewImage(r)))},removeAllImages:function(){u.images=[];u.sources={};u.loadQueue=[];u.enableSlideshow&&u.pauseSlideshow();n("."+f.thumbsClass+", ."+f.pagingClass).empty();u.current=-1},viewImage:function(t){var o,i,s,b,v;if(u.current!==t){u.enableSlideshow&&!u.slideshowTransition&&u.pauseSlideshow();var r=u.wrapper,p=!1,c=u.images[t];if(c){var w=c.src,l=c.caption,a=c.data;w&&(p=!0,o=u.showThumbs,i=null,u.showThumbs&&(i=u.find('img[rel="'+t+'"]'),o=i&&i.length,s=f.activeThumbClass,o?(i.parent().siblings().removeClass(s),i.parent().addClass(s)):u.find$("li."+s).removeClass(s)),r.parent().removeClass(f.loadedClass),u.loaded(t)&&r.parent().addClass(f.loadedClass),b=u.loadImage(t,function(){var s=r.find("."+f.imageClass),h,c,t,e;if(s.length&&(s.removeClass(f.currentImageClass),s.addClass(f.lastImageClass)),n(this).addClass(f.currentImageClass),r.append(n(this)),u.clickingNavigation&&n(this).click(u.nextImage),n(this).width()&&n(this).height()?u.resizeContainer(n(this)):(h=n(this),c=setInterval(function(){u.resizeContainer(h);clearTimeout(c)},2)),u.fullScreen&&!u.infullScreen){u.onEnterFullScreen(u.mask);u.infullScreen=!0}u.dataElement&&u.dataElement.length&&(u.showCaptions&&(t=u.dataElement.find("."+f.captionClass),t.length&&(t.empty(),!l&&o&&(l=i.attr("title"))),t.html(l)),u.showExtraData&&(e=u.dataElement.find("."+f.imageDataClass),e.length&&(e.empty(),!a&&o&&(a=i.data("data")),e.html(a))));r.hover(function(){r.addClass(f.imageHoverClass);u.onImageHoverOver()},function(){r.removeClass(f.imageHoverClass);u.onImageHoverOut()});u.onImage(n(this),u.dataElement,i);u.preloadNextInQueue()}))}if(p||(r.siblings().andSelf().empty(),u.find("li."+f.activeThumbClass).removeClass(f.activeThumbClass)),u.imageControls&&(v=u.pageNumberForImage(t),u.currentPage===v||u.pageTransition||u.goToPage(v,t),u.updatePaging(t+1)),u.current=t,u.carouselControls&&u.images.length>u.pageSize){var e=t,h=u.pageSize-1,y=Math.floor(u.pageSize/2);!u.loop&&t<y?e=0:!u.loop&&t>=u.length-y?(h=u.length-1,e=h-u.pageSize+1):(e-=y,h=e+u.pageSize-1);u.onCarousel(e,h);u.find("li").removeClass(f.currentThumbClass).hide();u.viewThumbs(e,h);u.currentPage=u.pageNumberForImage(t)}}},firstImage:function(){u.atFirstImage()||(u.separatePageBrowsing||u.atFirstPage()?u.viewImage(0):u.goToPage(1))},nextImage:function(){var n,t;!u.separatePageBrowsing&&u.lastImageOnPage()?(u.atLastPage()&&u.loop?u.goToPage(1):u.goToPage(u.currentPage+1),u.onNext()):(n=u.getNextImage(),n!==null&&(u.viewImage(n),u.onNext()));t=u.getNextImage();t!==null&&u.addToLoadQueue(t)},prevImage:function(){var n,t,i;!u.separatePageBrowsing&&u.firstImageOnPage()?(u.atFirstPage()&&u.loop?u.goToPage(u.numberOfPages(),u.numberOfImages()-1):(n=u.currentPage-1,u.goToPage(n,n*u.pageSize-1)),u.onPrev()):(t=u.getPrevImage(),t!==null&&(u.viewImage(t),u.onPrev()));i=u.getPrevImage();i!==null&&u.addToLoadQueue(i)},lastImage:function(){u.atLastImage()||(u.separatePageBrowsing||u.atLastPage()?u.viewImage(u.numberOfImages()-1):u.goToPage(u.numberOfPages(),u.numberOfImages()-1))},imageHasData:function(){if(u.dataElement&&u.dataElement.length){var t=u.dataElement.find("."+n.exposure.captionClass).html(),i=u.dataElement.find("."+n.exposure.imageDataClass).html();return t&&t.length>0||i&&i.length>0}return!1},pageTransition:!1,playingSlideshow:!1,slideshowTimer:null,slideshowTransition:!1,slideshow:function(){u.slideshowTimer=setTimeout(function(){u.slideshowTransition=!0;u.nextImage();u.slideshowTransition=!1;u.slideshow()},u.slideshowDelay)},playSlideshow:function(){u.playingSlideshow||(u.slideshowControlsTarget&&(u.slideshowControlsElement.find("."+f.playSlideshowClass).hide(),u.slideshowControlsElement.find("."+f.pauseSlideshowClass).show()),u.slideshow(),u.playingSlideshow=!0);u.onSlideshowPlayed()},pauseSlideshow:function(){u.playingSlideshow&&(u.slideshowControlsTarget&&(u.slideshowControlsElement.find("."+f.playSlideshowClass).show(),u.slideshowControlsElement.find("."+f.pauseSlideshowClass).hide()),u.playingSlideshow=!1,u.slideshowTimer&&clearTimeout(u.slideshowTimer),u.onSlideshowPaused())},toggleSlideshow:function(){u.playingSlideshow?u.pauseSlideshow():u.playSlideshow()},first:function(){u.imageControls?u.firstImage():u.firstPage()},prev:function(){u.imageControls?u.prevImage():u.prevPage()},next:function(){u.imageControls?u.nextImage():u.nextPage()},last:function(){u.imageControls?u.lastImage():u.lastPage()},infullScreen:!1,exitFullScreen:function(){if(u.infullScreen){u.pauseSlideshow();u.deselectCurrentImage();u.onExitFullScreen(u.targetElement,u.mask);u.infullScreen=!1}},actualMaxWidth:function(n,t){return u.maxWidth?u.maxWidth-(f.widthDiff(n)+f.widthDiff(t)):0},actualMaxHeight:function(n,t){return u.maxHeight?u.maxHeight-(f.heightDiff(n)+f.heightDiff(t)):0},fitToMaxSize:function(n){var i=u.targetElement,r,t;u.stretchToMaxSize?(u.maxWidth&&n.width(u.actualMaxWidth(n,i)),u.maxHeight&&n.height(u.actualMaxHeight(n,i))):n.width()>n.height()?(u.fitToMaxWidth(n,i),u.fitToMaxHeight(n,i)):n.height()>n.width()?(u.fitToMaxHeight(n,i),u.fitToMaxWidth(n,i)):(r=u.actualMaxHeight(n,i),t=u.actualMaxWidth(n,i),(!t||r&&t&&r<t)&&(t=r),t&&n.width()>t&&(n.width(t),n.height(t)))},centerImageInWindow:function(t){var i=u.targetElement;i.width(t.width()).height(t.height());i.css({top:(n(window).height()-i.outerHeight(!0))/2,left:(n(window).width()-i.outerWidth(!0))/2});i.find("."+f.lastImageClass).each(function(){n(this).css({top:(i.height()-n(this).height())/2,left:(i.width()-n(this).width())/2})})},fitToWindow:function(){var t,i;u.maxWidth=n(window).width();u.maxHeight=n(window).height();t=u.targetElement.find("."+n.exposure.currentImageClass).width("auto").height("auto");t.width()&&t.height()?(u.fitToMaxSize(t),u.centerImageInWindow(t)):i=setInterval(function(){u.fitToMaxSize(t);u.centerImageInWindow(t);clearTimeout(i)},2)},fitToMaxWidth:function(n,t){var i=u.actualMaxWidth(n,t),r;i&&n.width()>i&&(r=Math.round(i*n.height()/n.width()),n.height(r),n.width(i))},fitToMaxHeight:function(n,t){var i=u.actualMaxHeight(n,t),r;i&&n.height()>i&&(r=Math.round(i*n.width()/n.height()),n.width(r),n.height(i))},resizeContainer:function(n){u.fitToMaxSize(n);u.fixedContainerSize||u.targetElement.show().width(n.width()).height(n.height())}}),n.extend(this,t,r),this.targetElement=n(this.target),this.targetElement.length||(this.target=t.target,this.targetElement=n('<div id="'+f.defaultTargetId+'"><\/div>').insertBefore(n(this))),c=this.wrapper=n('<div class="'+f.wrapperClass+'"><\/div>'),l=this.targetElement.addClass(f.targetClass).append(c),(this.showCaptions||this.showExtraData)&&(s="",this.showCaptions&&(s+='<div class="'+f.captionClass+'"><\/div>'),this.showExtraData&&(s+='<div class="'+f.imageDataClass+'"><\/div>'),h=n(s),h.length&&(this.dataElement=n(this.dataTarget),this.dataTarget&&this.dataElement.length?this.dataElement.addClass(f.dataContainerClass).append(h):(this.dataElement=n('<div class="'+f.dataContainerClass+'"><\/div>'),l.append(this.dataElement.append(h))))),this.showThumbs||(this.carouselControls=!1),!this.carouselControls&&this.controlsTarget&&(this.controls.prevNext||this.controls.firstLast||this.controls.pageNumbers)||(this.showControls=!1),this.showControls&&(this.controlsElement=n(this.controlsTarget).addClass(f.controlsClass).each(function(){u.controls.firstLast&&n(this).append(f.createLink(o.first,u.first,f.firstPageClass));u.controls.prevNext&&n(this).append(f.createLink(o.previous,u.prev,f.prevPageClass));u.controls.pageNumbers&&n(this).append(n('<div class="'+f.pagingClass+'"><\/div>'));u.controls.prevNext&&n(this).append(f.createLink(o.next,u.next,f.nextPageClass));u.controls.firstLast&&n(this).append(f.createLink(o.last,u.last,f.lastPageClass))})),this.enableSlideshow&&this.slideshowControlsTarget&&(this.slideshowControlsElement=n(this.slideshowControlsTarget).addClass(f.slideshowControlsClass).each(function(){n(this).append(f.createLink(o.play,u.playSlideshow,f.playSlideshowClass));n(this).append(f.createLink(o.pause,u.pauseSlideshow,f.pauseSlideshowClass).hide())})),this.keyboardNavigation&&(this.carouselControls?(n(document).bind("keyup","left",this.nextImage),n(document).bind("keyup","right",this.prevImage)):(n(document).bind("keyup","left",this.prevImage),n(document).bind("keyup","right",this.nextImage),n(document).bind("keyup","ctrl+left",this.prevPage),n(document).bind("keyup","ctrl+right",this.nextPage),n(document).bind("keyup","up",this.lastImage),n(document).bind("keyup","down",this.firstImage),n(document).bind("keyup","ctrl+up",this.lastPage),n(document).bind("keyup","ctrl+down",this.firstPage)),this.enableSlideshow&&n(document).bind("keyup","space",this.toggleSlideshow)),this.fullScreen&&(n(window).resize(this.fitToWindow),this.mask=n('<div class="'+f.maskClass+'"><\/div>').click(this.exitFullScreen).insertAfter(this.target),this.keyboardNavigation&&n(document).bind("keyup","esc",this.exitFullScreen)),e=null,this.jsonSource&&(f.isObject(this.jsonSource)?e=this.jsonSource:this.jsonSource.length&&(e=f.startsWith(this.jsonSource,"http://")||f.startsWith(this.jsonSource,"https://")?n.ajax({url:this.jsonSource,type:"GET",async:!1}).responseText:this.jsonSource)),this.addClass(f.thumbsClass).each(function(){var l,r,t,o,s,h,c,a,i;if(e&&(r=f.isObject(e)?e:n.parseJSON(e),r&&r.data))for(l in r.data)t=r.data[l],t.source&&t.source.length&&(o=n("<li><\/li>"),s=n("<a><\/a>").attr("href",t.source),t.thumb_source&&t.thumb_source.length?(h=n("<img />").attr("src",t.thumb_source),t.caption&&t.caption.length&&h.attr("title",t.caption),s.append(h)):t.caption&&t.caption.length&&s.attr("title",t.caption),o.append(s),t.extra_data&&t.extra_data.length&&o.append(n(t.extra_data)),n(this).append(o));if(c=!1,a=!1,n(this).children("li").length)if(i=null,n(this).show().children("li").each(function(){var t,s,e;if(c=!0,t=n(this).find("a"),t.length){t=n(t[0]);var h=t.attr("href"),r=t.find("img"),o=r.length?r.attr("src"):t.attr("rel"),l=r.length?r.attr("title"):t.attr("title"),v=t.hasClass(f.selectedImageClass)&&!i;t.remove();s=n(this).html();o&&(a=!0);n(this).remove();e=u.newImage(h,o,l,s);e>-1&&(v&&(i=e),u.loadQueue.length<u.preloadBuffer&&u.addToLoadQueue(e))}else n(this).remove()}),u.showThumbs||(u.pageSize=1,n(f.thumbsClass).remove()),c)u.preloadNextInQueue(),u.createPaging(),i?(u.goToPage(u.pageNumberForImage(i)),u.viewImage(i)):u.goToPage(1),u.enableSlideshow&&u.autostartSlideshow&&u.playSlideshow();else u.onEmpty(u);else u.onEmpty(u);u.onInit();u.initialized=!0})}})(jQuery),function(n){function t(t){if(typeof t.data=="string"){var r=t.handler,i=t.data.toLowerCase().split(" ");t.handler=function(t){var o,h;if(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&t.target.type!=="text"){var f=t.type!=="keypress"&&n.hotkeys.specialKeys[t.which],s=String.fromCharCode(t.which).toLowerCase(),u="",e={};for(t.altKey&&f!=="alt"&&(u+="alt+"),t.ctrlKey&&f!=="ctrl"&&(u+="ctrl+"),t.metaKey&&!t.ctrlKey&&f!=="meta"&&(u+="meta+"),t.shiftKey&&f!=="shift"&&(u+="shift+"),f?e[u+f]=!0:(e[u+s]=!0,e[u+n.hotkeys.shiftNums[s]]=!0,u==="shift+"&&(e[n.hotkeys.shiftNums[s]]=!0)),o=0,h=i.length;o<h;o++)if(e[i[o]])return r.apply(this,arguments)}}}}n.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};n.each(["keydown","keyup","keypress"],function(){n.event.special[this]={add:t}})}(jQuery)